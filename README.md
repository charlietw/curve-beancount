# Curve-Beancount

## What problem does this solve?

I recently moved from a SaaS budgeting solution to [Plain Text Accounting](https://plaintextaccounting.org), more specifically
[Beancount](https://beancount.github.io/docs/index.html). 

Overall, the transition has been smooth and enjoyable, but inputting transactions
undoubtedly takes me longer than I would like. Enter Curve-Beancount...

With this tool, you are able to retrieve Curve Receipts sent to your Gmail account, parse them, and output them as Beancount transactions for a  ledger.

Using this flow, I am able to automatically keep my ledger up to date with ease, saving me hours every week.

## Setup


### Environment variables
In order to run Curve-Beancount, you need to set the following environment variables on the machine
you are running it on, all of which are prefixed by ```CB_```

```CB_TOKEN_DIR``` = the relative path for the token file generated by the Oauth flow

```CB_CREDS_DIR``` = the relative path for the credentials file downloaded for your Gmail API

```CB_BEANCOUNT_LEDGER_DIR``` = the relative path to your Beancount ledger where you want the transactions to go

```CB_EMAIL_ADDRESS``` = the email address your Curve Receipts are being sent to

```CB_TEST_EMAIL_ADDRESS``` = optional, but if you want to run the unit tests locally then you can run the tests against a different email address to have more control over what you are testing

```CB_BEANCOUNT_ACCOUNT``` = the account you want to attribute your beancount transactions to (e.g. the Debit Card)

```CB_BEANCOUNT_EXPENSE_ACCOUNT``` = the Expense account you want your beancount transactions to be posted to (e.g. a "to be categorised" account) 

## Usage

From ```tasks.sh```:

```run-file ``` - retrieve the most recent transactions and output them to your ledger from ```CB_BEANCOUNT_LEDGER_DIR```.

The first time you run this you need to complete the Oauth2 flow.



